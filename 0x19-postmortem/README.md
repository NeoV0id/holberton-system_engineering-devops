# POSTMORTEM
*Website Downtime*

### ISSUE SUMMARY
An outage occured on xxx website on the **2nd June 2022, from around 5:00 AM to 2:00 PM on the same day**. Since the website was completely down due to what we call a "**single point of failure**", **100 %** of the users were affected.

## TIMELINE
The issue was detected **by a user, who contacted support** (fortunately our support page isn't hosted on the same server as our main website): "Hello there, I wanted to consult your website [...] however, it kept leading me to a 500 error page. After many try to connect to it[...], I decided to do some internet research and it seems like the problem comes from your side, not mine, could you please fix it ?" We receive this support request at 5:47 AM.

## ROOT CAUSE AND RESOLUTION
We then did all we could to find and fix the problem. We first tried to run tests to find where the problem was:
> We **checked the process tree**. That way we saw that the server was not running anymore but **the problem was not there**, this was not the single point of failure since the **backup server would still be running**.
> Our web server **should be listening to port 8080**. It was what it was doing. So the port **was not the problem** either.
> Check the log. We noticed a problem in the load balancer. **The load, was overload** !
The **main two ideas of fixing**, were either, **reducing the amount of connections** to a server, or **inserting a new load balencer**. The problem was fixed **thanks to the connection reducing**, though it was in order to buy time to implement a backup load balencer.

### DETAILS
The load balencer is the member in a web infrastructure which manage the user connections to the website and redistribute it to each servers. However we only had one load balencer, and there was a lot of connection that day since the students received the answers of the school they applied to.

To resolve the issue we reduced the amount of connection since some connections are useless (for example many people conncting multiple times on the same computer) but are still using our resources. Then we **installed a new load balencer and configurated it**.

## Corrective and preventative measures
To avoid such problem to happen in the future, I encourage you to choose a more secured infrastructure.
![image](https://viewer.diagrams.net/?tags=%7B%7D&highlight=0000ff&edit=_blank&layers=1&nav=1&title=1-distributed_web_infrastructure%20(4).drawio#R7Vxdc9soFP01ntl9aEYS%2BvJjYmfTnUk7bT2zbR%2BxhGRtsfAiHNv76xckZEvGjok%2FIpzNTMYxV4DQ5ZzDBYF7YDBdPlA4m3wiMcI9x4qXPTDsOU7oh%2FxTGFaVwQV2ZUhpFlcma2MYZf%2BiymjX1nkWo0LaKhMjBLNs1jZGJM9RxFo2SClZtLMlBMctwwymSDGMIohV6%2FcsZhNptf3%2B5sJHlKUTeevQCaoLU1hnlk9STGBMFg0TuO%2BBASWEVd%2BmywHCwndtv%2Fyx5%2Bq6YRTlTKfAXZ%2F9xb7i1eixPwoeGKSZn32wHdk4tqqfGMXcATJJKJuQlOQQ32%2Bsd5TM8xiJai2e2uR5JGTGjTY3%2Fo0YW8nehHNGuGnCplheRcuM%2FWh8%2FymquvFkariUNZeJVZ3IGV39aCYapURyU6xM1eWSDOMBwYSWTwdiiMIk4vaCUfILNa74UYjGCb%2BiOlb6uiBzGqHnvCkBCmmK2HP5ZEbh6sYdZL89IDJF%2FBF4BoowZNlTG4tQQjpd59v0Ov8iO%2F4lIKjqfYJ4Lu80wJl4eAUaGHPeCQgsJhlDoxks3bHgzG938Bmd%2FoQoQ8tnvVRflUSTSrMm3qLB29o2aVLWupBfATCHXI4uu2TONcEMohfQpZdlFL1cq0sYWL1jNPbmFBAkYYSinSAYh57rWa8DArM0FigaO0KUaxu32Qo82p3%2FQq31UBi7u5wfOmPg%2B%2BfRWtfaEltNrfUvpbWOQVr7BqTW1WRZ3yySqVR6TaVdd%2FzPZr8%2FDwK7Hc06LwxnLyq1uiAwTGrd%2FVKrznauUGrDzrXWnEnjcUprv4xkF1VaryullUW%2FkEzM9Gq0%2BU4bbS7YQlHVUFlqC0jrZpwg4Z1iqx0sB9oDeXAKvC6q4brwMkzDvf0argZ616fhntW5hrvGaLj%2B2sRpsdJFZbyvy7PAKJ45oTkRs62HApMjZl0UeGaBoN8tCII3Nm%2FSRYFrFAr6ypD7HY25QQ684Lbn%2BJg%2Fzt2Yj8J%2BKr59TrN8%2BcxwbB8ejs8wuHp%2Be3AFfteDK3gfXM%2F7Xs3SHV19oygFuh1dWzjQhMGWrgYm6ao2DIBRKKibff3K2vnKk23OKv8RqmrSslM93782Lhk0sh41sF4jBMyKU23PFAhoTliNjqx0MWDWjNXt9kVfSwZ0V4lbkZVJS8TaGDBribhudiOseiQw5pY7iFEe7YmsPt7OKFmuFPwUEzgTX7kHIcYIk5TCKc8%2FQzTjDRa1ta992Vw4vOa8RPXe1h1r0EmSOLt7N%2FbHvnemNWgHbL1HBF1Hc8AYJdefJn%2BwbiwrbCu6fVDSy1QDMK%2Bv874mxx2z9s6BwByhP24GbdQEWhcFhu2grNvdkPrb2QxnEb83ycWTy5eDHc%2BXQ8uw%2BbJzhQq7FS5fg7gGuuJqVgTlvIvrOcVVFwVm7Zmsm31t2tr9Wx47POA5jj5xdG3HJCQiMeIZxrBAxjnWdjt3rPoq8i041u18kzzwzRF83XDAYMV3rvS1pKO%2BkBpCBivSWPZOYn1ajb4%2BnkapM3aNPgn7%2FeNC8rXx%2FN5%2FJ%2BFZSai9emnYzjt1%2BbJBQudNk1A7drscC11Hcb9cPVbdvl5P%2Ft%2BtGW8tGfu22m%2Fhjm5zL9Zr6jHKbyidc74K0rCJ%2BEwwWfB%2FJCmp%2FM8cFeJ4A9fDOkM1oSmU3uQ%2BYYpDc5KjLe9LE8RZmvMkRokoJpzKI1R8K83TLI5L6S54F2d5%2BlhmG7obyzfpMGEivHjZcDCc8IIoFygSZyxKD3p3%2FI%2F7dCCk1%2BNtHfC0vUnzP5GdsgHJefNhVnY4ggVbiKcXwwcT2lI%2B6Zk4bdvb2PAUbDjeDnBsHyg5HzjUg181l7nH85rNw8%2Bj3xYLARG2mqHf6yz8ls1cqgrsqovXc5MQMob0JiJTIR7ittafX%2FjHbRxTVBR769%2Br4tarzE7sei9NrcmBo6fJF5uduOqhj72Ki7P8V9slbf8dt%2Ftir1sPb5HQ3SPR9G49PzzxyFYQtDuyPuVY11CFUMqJLaUe%2B1BFRx%2F94snN79xU2Tc%2FFgTu%2FwM%3D)
Our infrastructure was similar to this one. As you can see we almost have everything backed up, but as you can see our sole load balencer receive the requests, responses and all connections in general. We don't have a single client monitor and our requests and responses are not encrypted. Moreover even if we had a backup load balencer, it still wouldn't be good if our servers were all related.

![Alt text](https://viewer.diagrams.net/?tags=%7B%7D&highlight=0000ff&edit=_blank&layers=1&nav=1&title=3-scale_up.drawio#R7V1bc9o4FP41mWkfyviOeUxp2u5M0k2XzqR92hG2AG%2BMRY0SoL9%2BJVsCWzJYARsUQqfT4mP5pvPpOxfJx1d2f7r8koLZ5A6FML6yjHB5ZX%2B6sizf88m%2FVLDKBY5t5oJxGoW5qCAYRH8gExpM%2BhSFcF5qiBGKcTQrCwOUJDDAJRlIU7QoNxuhuHzVGRhDSTAIQCxLH6IQT5jU9HqbHV9hNJ6wS%2FtWN98xBbwxe5L5BIRoURDZN1d2P0UI57%2Bmyz6Mad%2FxfsmP%2B7xl7%2FrGUphglQNGf8DtHZo7D6Pr%2BDv428eP0e0HdrPPIH5iD3yTBOlqhmFIxCn8%2FQTnmN0%2FXvFOgSHpI7aJUjxBY5SA%2BGYj%2FZiipySE9MoG2dq0uUVoRoQmEf4HMV4xhYMnjIhogqcx2wuXEf5Z%2BP2LnYr%2B%2FrQsbqz4RoLT1c%2Fixq%2FixuagbIsfNUIJ%2FgymUUwFX2H8DHEUALaD3Z1p0e0ojvsoRmnWBXYIoD8KiHyOU%2FQIC3u8wIfDEd0zATN6%2BCiGy2sKRSKTlcb0OEdPaQB3aIqDH6RjiHe08%2FJ2VEWFCzBIfIFoCsnjZ7qNAY6eyzAHbLSM1%2B02gCI%2FGKZegC9Twlc%2FjuizS5CKYzKkKXQWkwjDwQxkvbEgpFIGxsv1sLXPn2GK4XJnL7G9DhvDjMRMPqYXBUrgskmRDYyW%2BtWS%2BvXK8mJM%2B2EGEvJ7TH9%2F%2BjZ4t1gsKGxWM%2FieNyFXLLbi4mEqSoqtyHk6I4SGIO0EaEpOmV3W%2BOue%2FHMdhimcz7eeX9B1mRxq9N2A9iyjrL61WurU57WlPrtCfUIncfaIo%2BSx3CPl7tuP9rb2ai2%2FWIr8Uuxb3v%2FKnMNOd48iShVcj2sdrQS98lPkJMqOKppC4URW3YnyXpBOlOl6%2FYz7q9%2BpUL88TAi6sURsCUqgwIJMBOJonJDNgKgUEvlHOkCILYuv2Y5pFIaZcSaDM4iS8S0cUUU7G8k%2FDPpUhMjhozhzWCbkQEjO8HFGOyTrIvcj%2BUs6rW903CuX3G2fbJubbfKXNk9xHyXkAUCUwQyCOV5Qh4KCGAMMhtmzcjvMXQpTML%2B9hmhA0LrtyjTgV7CA3RYLuFtJnD595tRya%2Bb9fkI5l9r5n6KoirQLQOIN6Uk%2FzLM%2BvSYNTGe2zGicHGkMQfA4zojlA7sobZKOh%2B8s16WtiIItQ%2Fj9Xr6JweCW7OtT5I0I9jC71iLKemMOUzL4qRdesCMUaOS%2Frz9%2B3A9qLBQR5z3ThGFpA2GCobFVDU2vLYj5Nf79fEbGJzylg8%2F9%2BMxqdbruTh9%2FX2995AcwqPQSh77ruEbj3rqnaE1Nvbx1dw8kVHWcPuFfx20sACTbxfDCM8ifZgOSxmDV0wtWntaw6uzmnAuwiqo09EJWV2dkmXvhynqtwHK%2B%2FbmZfJgEoPvvw93jA7q5%2F5Iop61MvSyhV%2Bea17vXFnWvRf%2F4FgHqeJFgDSYB9XvVHFsOWaIBEMcwRuMUTGmEBdOIPDAN98r77jc76hNqS8gT76YqvHoVPtZoZFX7WKE39FyvGRfb9oRUnHPqXE5vryiODUYJIJ%2BjFC4AverLkBGSaHqAUZpNZ7Si8v3cap6ViLNkQxMIcIUwvgIAVVF8a6lYbhILANgo8aItW0i1VaTO21JXpUHSLsQpBsCqHgOLk7nTYNZ5DC8Gwv6epFlh8Xd5BpoYfH7bZziKt7mBLYxuxzgxGVvOAcObTbW0FGVaqmFmx%2BiWIwKnZnhnWwWP76AowTAYPHJ88UUPDU%2B91tOIrxg4WJrxiJxxVXEHWa%2FL%2BXSaMafpcbO1HPheqx9c6IdOlep9a0gYphl28YxaT%2B%2B4rr51iPNwYReN2KWnyi6q091HYhc52FwzhHXWVGAKYYR9ci44JKmtCxdYbpkLanOP50gGHDb1ZGBrRQaWnHhYk4H9lsjAMU9OBj2NyMDo2GU%2B8HfTAdkQR%2FSaIswyP3TbmptQp4JWkxfKq%2BC4m68JFTjazbAS1PlXLzFKu1B4rBkyXQySKgq5E6QJCi05h3aHkgijNErGNPLNl35n02M0d5YHwzEMSAsZv%2BsF4RynQYyewiZt1xblN2Chun7ZQlV4q72j2if%2FXO1TxzD8Mjt4tq2nE9uu5bJULZdea4Mc8wBktmW51qsQldYH7bRcYoh15pZLFYV246FUdigBA1gVGrAF65szCy8C9FwhreAaAqLzMza6%2Bp930sVMimayanK45x7TTh6ynqx5O2naJR7qdi%2BBnCoR2YpEZOnlQjtyFveczWHtwoVXbg5VUdi8OTyMBuX3Ey8Wamuq8aiRnKP1iucXzD28rZSOrTrHwMtjaMIErn7hWdklUp7qErIEfg3ezjFHoAxCzdbU2PJE1wMcEgGb7qJ2SCxh8G0cJUsJuxsUmq%2FD%2FvSkBXaS%2BTnuTJdzSCbxYn9OZn%2BUpxT0Sg%2Fy%2FIw%2BcNvP%2Fryx8FsdbnqF3%2Fy%2BC5bmejaLaSWDCCUbi%2FPq7YppepoZFlvOipa7nuAXzs%2Bw582KNfNHtumHLJrX16afnmPbNenKySVXK451NVyrUspwKr%2BE5XmlpdR1ycyzDCmV8%2Bx6ZThd7dJoAggNVRA6nl0EYd0E89sGoaUVCG05zf5m8hpiLTbViprtOUHavRh8SWyojH1Xcew7ekWarnY%2B9yWx0STcNJvRteVak28ksWGfPLy25SLrbyOzsa7Vczqjfsh7OReWPRnLqr6eq9lsOb%2Fvwkj%2FRKscA7r8hS6WuVsNvt%2BewUgXq3CpZo%2FXwub9Ke3c9%2FJIvwz0XU75a8th8vt%2BcwNd%2BdMJ7Y10T56jk4d%2BErLxzKvjh2A%2BWfd8oZep%2FB5gDNMkk9BXp8VRYUm00NCwK%2B2xa96PfskXF9wKjXDZgR9hEMvvuaKiVT%2FCIJ7IFM7T8jcYvKqPMOTZtkisO7%2B7ck%2BmuILImPOvWHGZub1a%2F7AE3C21RAkeKmqJ3qfRM62wbxkJxAuUPhZKBA1rS%2BevxdHWUkLsAxSF0dL8tyiqSLDhsdYED4qgdyUWXNf%2Bb%2FrTEZXF8%2BT6Dscs2d%2FZZ7qs7NmYe1UaqXLYTlzNuLLdyeYZdt11gemkMsQCmI5ab%2FgkZYTFF%2F%2BO%2BUmoSiWdST64NMxPVJd015DUtyzprruuKvEjA%2BZlJX50qNzjtjjsyObm45q517j5Qql98z8%3D)
In order to have a more secured and monitored infrastructure, it would be smarter to have enough backup, not too much, to have at least one server not related at all to the others. This would reduce the risk of downtime and if it sill happen, reduce the time by a lot.
